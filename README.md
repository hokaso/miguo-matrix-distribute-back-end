# 米果新媒体矩阵的哔哩哔哩上传模块

详细说明：https://hocassian.cn/archives/tech/7895/

由于该模块使用了@comwrg 的[开源代码](https://github.com/comwrg/bilibiliupload)，故在此将代码开源。

此后端模块包含消息队列模块和Python自动化模块，上继Spring Boot数据综控后端，下承MySQL数据库，通过消息队列 + 自动化脚本实现内容的多平台分发，用于分发文章或视频至多个全媒体平台，目前程序可进行今日头条和哔哩哔哩这两个第三方平台的分发。
### (1) 文章分发。
员工通过指定页面创建新文章，经由管理员审核通过，系统自动将对应条目的信息（文章标题、正文内容、文章头图、作者名称）推送至消息队列（生产者），作为消费者的Python自动化模块监听到指定队列有数据积攒时，自动拉取对应条目，将其中的内容向多个第三方平台的分发接口进行数据输出，输出完后接收平台的返回值，若发布成功，将该返回值写入对应条目的指定属性中，然后拷贝该条目至网站媒体内容下，等待员工的二次修改与审核以发布至官网；若发布失败，返回失败原因至管理前端。
### (2) 视频分发。
员工通过指定页面创建新视频和与之对应的视频信息，经由管理员审核通过，系统自动将对应条目的信息（视频标题、视频片段、视频简介、视频封面、创作团队、视频标签）推送至消息队列（生产者），作为消费者的Python自动化模块监听到指定队列有数据积攒时，自动拉取对应条目，将其中的内容向多个第三方平台的分发接口进行数据输出，输出完后接收平台的返回值，若发布成功，将该返回值写入对应条目的指定属性中，然后拷贝该条目至网站媒体内容下，等待员工的二次修改与审核以发布至官网；需要注意的是，由于视频通常而言所占存储空间较大，为不造成系统空间冗余，每次发布成功后将会自动删除已上传的视频片段以节省空间；若发布失败，返回失败原因至管理前端。
